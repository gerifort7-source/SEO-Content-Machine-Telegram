<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>SEO Content Machine Pro</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px}#app{max-width:1200px;margin:0 auto;background:white;border-radius:15px;box-shadow:0 10px 40px rgba(0,0,0,0.3);padding:20px}.header{text-align:center;margin-bottom:20px}.tabs{display:flex;gap:10px;margin-bottom:20px;border-bottom:2px solid #eee}.tab-btn{padding:10px 20px;background:#f0f0f0;border:none;cursor:pointer;border-radius:5px;font-weight:bold}.tab-btn.active{background:#667eea;color:white}.content{display:none}.content.active{display:block}.editor{display:grid;grid-template-columns:1fr 1fr;gap:20px}.form-group{margin-bottom:15px}.form-group label{display:block;font-weight:bold;margin-bottom:5px}.form-group textarea,.form-group input,.form-group select{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-family:inherit}.btn{padding:10px 20px;background:#667eea;color:white;border:none;border-radius:5px;cursor:pointer;font-weight:bold;margin-right:10px}.btn:hover{background:#5568d3}.media-preview{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}.media-item{position:relative;width:100px}.media-item img,.media-item video{width:100%;height:100px;object-fit:cover;border-radius:5px}.media-delete{position:absolute;top:5px;right:5px;background:#ff6b6b;color:white;border:none;cursor:pointer;border-radius:3px;padding:3px 6px}.notif{padding:10px;margin-bottom:15px;border-radius:5px;display:none}.notif.show{display:block}.notif.success{background:#d4edda;color:#155724}.notif.error{background:#f8d7da;color:#721c24}.stat-card{background:linear-gradient(135deg,#667eea,#764ba2);color:white;padding:15px;border-radius:5px;text-align:center;margin:10px 0}.stat-number{font-size:2em;font-weight:bold}.calendar{background:#f9f9f9;padding:15px;border-radius:8px;margin-bottom:15px}.calendar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:5px}.calendar-day{padding:8px;text-align:center;border-radius:5px;cursor:pointer;border:1px solid #ddd}.calendar-day:hover{background:#e0e0e0}.calendar-day.selected{background:#667eea;color:white}.schedule-list{max-height:300px;overflow-y:auto}.schedule-item{background:#f0f0f0;padding:10px;margin:10px 0;border-radius:5px;border-left:4px solid #667eea}</style></head><body><div id="app"><div class="header"><h1>SEO Content Machine Pro</h1><p>Telegram Bot API + Perplexity AI + Calendar</p></div><div id="notif" class="notif"></div><div class="tabs"><button class="tab-btn active" onclick="switchTab(0)">Редактор</button><button class="tab-btn" onclick="switchTab(1)">Календарь</button><button class="tab-btn" onclick="switchTab(2)">ИИ Генератор</button><button class="tab-btn" onclick="switchTab(3)">Настройки</button></div><div id="editor" class="content active"><div class="editor"><div><h3>Редактор Поста</h3><div class="form-group"><label>Текст поста</label><textarea id="postText" placeholder="Введите текст..."></textarea></div><div class="form-group"><label>Медиафайлы</label><input type="file" id="mediaFile" multiple accept="image/*,video/*"><div id="mediaPreview" class="media-preview"></div></div><div id="aiResult" style="display:none;background:#f0f0f0;padding:10px;margin:10px 0;border-radius:5px"></div><button class="btn" onclick="publishPost()">Опубликовать</button><button class="btn" style="background:#999" onclick="clearEditor()">Очистить</button></div><div><h3>Статистика</h3><div id="stats"></div></div></div></div><div id="calendar" class="content"><h3>Планировщик Постов</h3><div class="calendar"><div class="calendar-header"><button class="btn" onclick="prevMonth()" style="padding:5px 10px">← Назад</button><h4 id="currentMonth"></h4><button class="btn" onclick="nextMonth()" style="padding:5px 10px">Вперед →</button></div><div class="calendar-grid" id="calendarGrid"></div></div><h3>Запланированные посты</h3><div class="schedule-list" id="scheduledList"></div></div><div id="ai" class="content"><h3>ИИ Генератор</h3><div class="form-group"><label>Тема</label><input type="text" id="aiTopic" placeholder="Например: мода, технологии"></div><div class="form-group"><label>Тон</label><select id="aiTone"><option value="creative">Креативный</option><option value="professional">Профессиональный</option></select></div><button class="btn" onclick="generateAI()">Генерировать</button><div id="aiResultDisplay" style="margin-top:15px"></div></div><div id="settings" class="content"><h3>Настройки</h3><div class="form-group"><label>Telegram Bot Token</label><input type="password" id="botToken" placeholder="Введите токен"></div><div class="form-group"><label>Chat ID</label><input type="text" id="chatId" placeholder="Введите ID чата"></div><button class="btn" onclick="saveSettings()">Сохранить</button></div></div><script>let posts=[],scheduled=[],media=[],selectedDate=new Date();const apiKey='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';function switchTab(i){document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));document.querySelectorAll('.content')[i].classList.add('active');document.querySelectorAll('.tab-btn')[i].classList.add('active');if(i===1)renderCalendar();updateStats()}function showNotif(msg,type='success'){const notif=document.getElementById('notif');notif.textContent=msg;notif.className='notif show '+type;setTimeout(()=>{notif.classList.remove('show')},3000)}function updateStats(){const stats=document.getElementById('stats');if(stats)stats.innerHTML=`<div class="stat-card"><div class="stat-number">${posts.length}</div><div>Опубликовано</div></div><div class="stat-card"><div class="stat-number">${scheduled.length}</div><div>Запланировано</div></div>`}function renderCalendar(){const now=new Date(selectedDate);const year=now.getFullYear();const month=now.getMonth();const firstDay=new Date(year,month,1);const lastDay=new Date(year,month+1,0);const monthName=new Date(year,month).toLocaleString('ru-RU',{month:'long',year:'numeric'});document.getElementById('currentMonth').textContent=monthName;const grid=document.getElementById('calendarGrid');grid.innerHTML='';for(let i=0;i<firstDay.getDay();i++)grid.appendChild(document.createElement('div'));for(let d=1;d<=lastDay.getDate();d++){const btn=document.createElement('div');btn.className='calendar-day';btn.textContent=d;const date=new Date(year,month,d);if(date.toDateString()===selectedDate.toDateString())btn.classList.add('selected');btn.onclick=()=>{selectedDate=date;renderCalendar()};grid.appendChild(btn)}}function prevMonth(){selectedDate.setMonth(selectedDate.getMonth()-1);renderCalendar()}function nextMonth(){selectedDate.setMonth(selectedDate.getMonth()+1);renderCalendar()}document.getElementById('mediaFile').addEventListener('change',(e)=>{const files=Array.from(e.target.files);files.forEach(f=>{const reader=new FileReader();reader.onload=(event)=>{media.push({name:f.name,data:event.target.result,type:f.type});renderMedia()};reader.readAsDataURL(f)})});function renderMedia(){const preview=document.getElementById('mediaPreview');preview.innerHTML=media.map((m,i)=>`<div class="media-item"><img src="${m.data}" alt="${m.name}"><button class="media-delete" onclick="deleteMedia(${i})">✕</button></div>`).join('')}function deleteMedia(i){media.splice(i,1);renderMedia()}function clearEditor(){document.getElementById('postText').value='';media=[];document.getElementById('mediaFile').value='';renderMedia()}async function publishPost(){const text=document.getElementById('postText').value;const botToken=localStorage.getItem('botToken');const chatId=localStorage.getItem('chatId');if(!text){showNotif('Напишите текст!','error');return}if(!botToken||!chatId){showNotif('Добавьте Telegram credentials!','error');return}sendToTelegram(text,botToken,chatId,media);clearEditor();updateStats()}async function sendToTelegram(text,botToken,chatId,mediaFiles){try{if(mediaFiles.length>0){const firstMedia=mediaFiles[0];const formData=new FormData();formData.append('chat_id',chatId);formData.append('caption',text);formData.append('photo',dataURLtoBlob(firstMedia.data),firstMedia.name);await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`,{method:'POST',body:formData})}else{await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({chat_id:chatId,text:text,parse_mode:'HTML'})})}posts.push({text,time:new Date().toLocaleString()});showNotif('✅ Пост опубликован в Telegram!','success');updateStats()}catch(e){showNotif('❌ Ошибка отправки: '+e.message,'error')}}function dataURLtoBlob(dataurl){const arr=dataurl.split(',');const mime=arr[0].match(/:(.*):/)[1];const bstr=atob(arr[1]);let n=bstr.length;const u8arr=new Uint8Array(n);while(n--){u8arr[n]=bstr.charCodeAt(n)}return new Blob([u8arr],{type:mime})}async function generateAI(){const topic=document.getElementById('aiTopic').value;const tone=document.getElementById('aiTone').value;if(!topic){showNotif('Введите тему!','error');return}showNotif('Генерирую контент...','success');try{const response=await fetch('https://api.perplexity.ai/chat/completions',{method:'POST',headers:{'Authorization':`Bearer ${apiKey}`,'Content-Type':'application/json'},body:JSON.stringify({model:'sonar-pro',messages:[{role:'user',content:`Создай короткий пост для Telegram (max 200 символов) в ${tone} тоне о: ${topic}. Только текст.`}],max_tokens:200})});const data=await response.json();if(data.choices&&data.choices[0]){const text=data.choices[0].message.content;document.getElementById('postText').value=text;const result=document.getElementById('aiResultDisplay');result.innerHTML=`<strong>Сгенерирован текст:</strong><p>${text}</p><button class="btn" onclick="publishPost()">Опубликовать</button>`;showNotif('✨ Контент сгенерирован!','success')}else{showNotif('Ошибка API: '+JSON.stringify(data),'error')}}catch(e){showNotif('❌ Ошибка ИИ: '+e.message,'error')}}function saveSettings(){const botToken=document.getElementById('botToken').value;const chatId=document.getElementById('chatId').value;if(!botToken||!chatId){showNotif('Заполните все поля!','error');return}localStorage.setItem('botToken',botToken);localStorage.setItem('chatId',chatId);showNotif('✅ Настройки сохранены!','success')}window.addEventListener('load',()=>{const botToken=localStorage.getItem('botToken');const chatId=localStorage.getItem('chatId');if(botToken)document.getElementById('botToken').value=botToken;if(chatId)document.getElementById('chatId').value=chatId;updateStats();renderCalendar()})</script></body></html>

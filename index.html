<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>SEO Content Machine Pro</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;padding:20px}#app{max-width:1200px;margin:0 auto;background:white;border-radius:15px;box-shadow:0 10px 40px rgba(0,0,0,0.3);padding:20px}.header{text-align:center;margin-bottom:20px}.tabs{display:flex;gap:10px;margin-bottom:20px;border-bottom:2px solid #eee;flex-wrap:wrap}.tab-btn{padding:10px 20px;background:#f0f0f0;border:none;cursor:pointer;border-radius:5px;font-weight:bold;font-size:14px}.tab-btn.active{background:#667eea;color:white}.content{display:none}.content.active{display:block}.editor{display:grid;grid-template-columns:1fr 1fr;gap:20px}@media(max-width:900px){.editor{grid-template-columns:1fr}}.form-group{margin-bottom:15px}.form-group label{display:block;font-weight:bold;margin-bottom:5px}.form-group textarea,.form-group input,.form-group select{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-family:inherit}.btn{padding:10px 20px;background:#667eea;color:white;border:none;border-radius:5px;cursor:pointer;font-weight:bold;margin-right:10px;font-size:14px}.btn:hover{background:#5568d3}.btn-danger{background:#ff6b6b}.btn-danger:hover{background:#ff5252}.media-preview{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}.media-item{position:relative;width:100px}.media-item img,.media-item video{width:100%;height:100px;object-fit:cover;border-radius:5px}.media-delete{position:absolute;top:5px;right:5px;background:#ff6b6b;color:white;border:none;cursor:pointer;border-radius:3px;padding:3px 6px;font-size:12px}.notif{padding:10px;margin-bottom:15px;border-radius:5px;display:none;position:fixed;top:20px;right:20px;z-index:1000;max-width:400px}.notif.show{display:block;animation:slideIn 0.3s ease-in}.notif.success{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.notif.error{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}@keyframes slideIn{from{transform:translateX(500px);opacity:0}to{transform:translateX(0);opacity:1}}.stat-card{background:linear-gradient(135deg,#667eea,#764ba2);color:white;padding:15px;border-radius:5px;text-align:center;margin:10px 0}.stat-number{font-size:2em;font-weight:bold}.calendar{background:#f9f9f9;padding:15px;border-radius:8px;margin-bottom:15px}.calendar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;margin-bottom:15px}.calendar-day{padding:8px;text-align:center;border-radius:5px;cursor:pointer;border:1px solid #ddd;font-size:12px}.calendar-day:hover{background:#e0e0e0}.calendar-day.selected{background:#667eea;color:white}.calendar-day.today{font-weight:bold;border:2px solid #667eea}.schedule-list{max-height:400px;overflow-y:auto}.schedule-item{background:#f0f0f0;padding:10px;margin:10px 0;border-radius:5px;border-left:4px solid #667eea;display:flex;justify-content:space-between;align-items:center}</style></head><body><div id="app"><div class="header"><h1>SEO Content Machine Pro</h1><p>Telegram Bot API + Perplexity AI + Calendar</p></div><div id="notif" class="notif"></div><div class="tabs"><button class="tab-btn active" onclick="switchTab(0)">–†–µ–¥–∞–∫—Ç–æ—Ä</button><button class="tab-btn" onclick="switchTab(1)">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</button><button class="tab-btn" onclick="switchTab(2)">–ò–ò –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä</button><button class="tab-btn" onclick="switchTab(3)">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button></div><div id="editor" class="content active"><div class="editor"><div><h3>–†–µ–¥–∞–∫—Ç–æ—Ä –ü–æ—Å—Ç–∞</h3><div class="form-group"><label>–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞</label><textarea id="postText" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç..."></textarea></div><div class="form-group"><label>–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã</label><input type="file" id="mediaFile" multiple accept="image/*,video/*"><div id="mediaPreview" class="media-preview"></div></div><div id="aiResult" style="display:none;background:#f0f0f0;padding:10px;margin:10px 0;border-radius:5px"></div><button class="btn" onclick="publishPost()">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button><button class="btn" style="background:#999" onclick="clearEditor()">–û—á–∏—Å—Ç–∏—Ç—å</button></div><div><h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3><div id="stats"></div></div></div></div><div id="calendar" class="content"><h3>–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ü–æ—Å—Ç–æ–≤</h3><div class="calendar"><div class="calendar-header"><button class="btn" onclick="prevMonth()" style="padding:5px 10px">‚Üê –ù–∞–∑–∞–¥</button><h4 id="currentMonth"></h4><button class="btn" onclick="nextMonth()" style="padding:5px 10px">–í–ø–µ—Ä–µ–¥ ‚Üí</button></div><div class="calendar-grid" id="calendarGrid"></div><div style="margin-top:10px"><label>–í—Ä–µ–º—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label><input type="time" id="scheduleTimeInput" style="width:100%;padding:8px;border:1px solid #ddd;border-radius:5px"></div><button class="btn" onclick="schedulePost()" style="margin-top:10px;width:100%">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç</button></div><h3 style="margin-top:20px">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã</h3><div class="schedule-list" id="scheduledList"></div></div><div id="ai" class="content"><h3>–ò–ò –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä</h3><div class="form-group"><label>–¢–µ–º–∞</label><input type="text" id="aiTopic" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –º–æ–¥–∞, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"></div><div class="form-group"><label>–¢–æ–Ω</label><select id="aiTone"><option value="creative">–ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–π</option><option value="professional">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π</option></select></div><button class="btn" onclick="generateAI()">–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button><div id="aiResultDisplay" style="margin-top:15px"></div></div><div id="settings" class="content"><h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3><div class="form-group"><label>Telegram Bot Token</label><input type="password" id="botToken" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω"></div><div class="form-group"><label>Chat ID</label><input type="text" id="chatId" placeholder="–í–≤–µ–¥–∏—Ç–µ ID —á–∞—Ç–∞"></div><button class="btn" onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button></div></div><script>let posts=[],scheduled=[],media=[],selectedDate=new Date();const apiKey='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';function switchTab(i){document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));document.querySelectorAll('.content')[i].classList.add('active');document.querySelectorAll('.tab-btn')[i].classList.add('active');if(i===1){renderCalendar();renderScheduledPosts()}updateStats()}function showNotif(msg,type='success'){const notif=document.getElementById('notif');notif.textContent=msg;notif.className='notif show '+type;setTimeout(()=>{notif.classList.remove('show')},4000)}function updateStats(){const stats=document.getElementById('stats');if(stats)stats.innerHTML=`<div class="stat-card"><div class="stat-number">${posts.length}</div><div>–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</div></div><div class="stat-card"><div class="stat-number">${scheduled.length}</div><div>–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</div></div>`}function renderCalendar(){const now=new Date(selectedDate);const year=now.getFullYear();const month=now.getMonth();const firstDay=new Date(year,month,1);const lastDay=new Date(year,month+1,0);const monthName=new Date(year,month).toLocaleString('ru-RU',{month:'long',year:'numeric'});document.getElementById('currentMonth').textContent=monthName;const grid=document.getElementById('calendarGrid');grid.innerHTML='';const dayNames=['–ü–Ω','–í—Ç','–°—Ä','–ß—Ç','–ü—Ç','–°–±','–í—Å'];dayNames.forEach(d=>{const h=document.createElement('div');h.textContent=d;h.style.fontWeight='bold';h.style.textAlign='center';grid.appendChild(h)});for(let i=0;i<firstDay.getDay()-1;i++)grid.appendChild(document.createElement('div'));for(let d=1;d<=lastDay.getDate();d++){const btn=document.createElement('div');btn.className='calendar-day';btn.textContent=d;const date=new Date(year,month,d);const today=new Date();if(date.toDateString()===today.toDateString())btn.classList.add('today');if(date.toDateString()===selectedDate.toDateString())btn.classList.add('selected');btn.onclick=()=>{selectedDate=new Date(date);renderCalendar()};grid.appendChild(btn)}}function prevMonth(){selectedDate.setMonth(selectedDate.getMonth()-1);renderCalendar()}function nextMonth(){selectedDate.setMonth(selectedDate.getMonth()+1);renderCalendar()}document.getElementById('mediaFile').addEventListener('change',(e)=>{const files=Array.from(e.target.files);files.forEach(f=>{const reader=new FileReader();reader.onload=(event)=>{media.push({name:f.name,data:event.target.result,type:f.type,size:f.size});renderMedia()};reader.readAsDataURL(f)})});function renderMedia(){const preview=document.getElementById('mediaPreview');preview.innerHTML=media.map((m,i)=>`<div class="media-item" title="${m.name}"><img src="${m.data}" alt="${m.name}"><button class="media-delete" onclick="deleteMedia(${i})">‚úï</button></div>`).join('')}function deleteMedia(i){media.splice(i,1);renderMedia()}function clearEditor(){document.getElementById('postText').value='';document.getElementById('scheduleTimeInput').value='';media=[];document.getElementById('mediaFile').value='';renderMedia()}function schedulePost(){const text=document.getElementById('postText').value;const timeStr=document.getElementById('scheduleTimeInput').value;const botToken=localStorage.getItem('botToken');const chatId=localStorage.getItem('chatId');if(!text){showNotif('–ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç!','error');return}if(!botToken||!chatId){showNotif('–î–æ–±–∞–≤—å—Ç–µ Telegram credentials!','error');return}const scheduleDate=new Date(selectedDate);if(timeStr){const[hours,minutes]=timeStr.split(':');scheduleDate.setHours(parseInt(hours),parseInt(minutes))}else{scheduleDate.setHours(9,0)}const now=new Date();if(scheduleDate<=now){showNotif('–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –≤ –±—É–¥—É—â–µ–º!','error');return}scheduled.push({text:text,time:scheduleDate.toLocaleString('ru-RU'),timestamp:scheduleDate.getTime(),media:media.map(m=>({name:m.name,data:m.data,type:m.type})),botToken:botToken,chatId:chatId});showNotif('üìÖ –ü–æ—Å—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω –Ω–∞ '+scheduleDate.toLocaleString('ru-RU'),'success');renderScheduledPosts();clearEditor();updateStats()}function renderScheduledPosts(){const list=document.getElementById('scheduledList');if(scheduled.length===0){list.innerHTML='<p style="text-align:center;color:#999">–ù–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤</p>';return}list.innerHTML=scheduled.map((s,i)=>`<div class="schedule-item"><div><strong>${s.time}</strong><p>${s.text.substring(0,60)}${s.text.length>60?'...':''}</p></div><div style="display:flex;gap:5px"><button class="btn" style="padding:5px 10px;background:#667eea;margin:0" onclick="publishScheduled(${i})">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button><button class="btn btn-danger" style="padding:5px 10px;margin:0" onclick="removeScheduled(${i})">–£–¥–∞–ª–∏—Ç—å</button></div></div>`).join('')}function publishScheduled(i){const s=scheduled[i];sendToTelegram(s.text,s.botToken,s.chatId,s.media);scheduled.splice(i,1);renderScheduledPosts();updateStats()}function removeScheduled(i){scheduled.splice(i,1);renderScheduledPosts();updateStats()}async function publishPost(){const text=document.getElementById('postText').value;const botToken=localStorage.getItem('botToken');const chatId=localStorage.getItem('chatId');if(!text){showNotif('–ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç!','error');return}if(!botToken||!chatId){showNotif('–î–æ–±–∞–≤—å—Ç–µ Telegram credentials!','error');return}await sendToTelegram(text,botToken,chatId,media);clearEditor();updateStats()}function dataURLtoBlob(dataurl){try{const arr=dataurl.split(',');const mime=arr[0].match(/:(.*?);/)[1];const bstr=atob(arr[1]);let n=bstr.length;const u8arr=new Uint8Array(n);while(n--){u8arr
